<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Harga</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='harga.css'>
</head>

<body>
    <div class="main">
        <h4>Kode</h4>
        <input type="text" id="kode">
        <h4>Harga</h4>
        <input type="text" id="harga">

        <div style="display: flex; flex-direction: row;">
            <div class="btn" onclick="hitungHarga();">Hitung Harga</div>
            <!-- <div class="btn">Hitung Kode</div> -->
        </div>

        <script>
            const $ = (id) => { return document.getElementById(id); };
            const data = {
                'A': 100000,
                'B': 50000,
                'C': 20000,
                'D': 10000,
                'E': 5000,
                'F': 2000,
                'G': 1000
            }
            const numbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0'];
            // Create our number formatter.
            var formatter = new Intl.NumberFormat('en-US', {
                style: 'currency',
                currency: 'IDR',

                // These options are needed to round to whole numbers if that's what you want.
                //minimumFractionDigits: 0, // (this suffices for whole numbers, but will print 2500.10 as $2,500.1)
                //maximumFractionDigits: 0, // (causes 2500.99 to be printed as $2,501)
            });

            function hitungHarga() {
                var kode = $("kode").value.toUpperCase();
                $("kode").value = kode;
                var harga = 0;
                var lastcode = "";
                var lastnumbers = "";

                for (var letter of kode) {
                    if (numbers.indexOf(letter) == -1) {
                        // Letter
                        if (lastnumbers != "") {
                            harga += data[lastcode] * Number(lastnumbers);
                            lastnumbers = "";
                        }
                        lastcode = letter;
                    } else {
                        // Numbers
                        lastnumbers += letter;
                    }
                }
                harga += data[lastcode] * Number(lastnumbers);
                var val = formatter.format(Number(harga));
                $("harga").value = val;
            }
        </script>
    </div>
</body>

</html>